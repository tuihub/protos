syntax = "proto3";

package librarian.v1;

import "google/protobuf/timestamp.proto";

option csharp_namespace = "TuiHub.Protos.Librarian.V1";
option go_package = "github.com/tuihub/protos/pkg/librarian/v1;v1";

message PagingRequest {
  int32 page_num = 1;
  int32 page_size = 2;
}

message PagingResponse {
  int64 total = 1;
}

// A globally unique identifier generated by `Searcher`
message InternalID {
  int64 id = 1;
}

message Account {
  InternalID id = 1;
  AccountPlatform platform = 2;
  string platform_account_id = 3;
  string name = 4;
  string profile_url = 5;
  string avatar_url = 6;
}

message AccountID {
  AccountPlatform platform = 1;
  string platform_account_id = 2;
}

enum AccountPlatform {
  ACCOUNT_PLATFORM_UNSPECIFIED = 0;
  ACCOUNT_PLATFORM_STEAM = 1;
}

message App {
  InternalID id = 1;
  AppSource source = 2;
  string source_app_id = 3;
  optional string source_url = 4;

  string name = 6;
  AppType type = 7;
  string short_description = 8;
  string image_url = 9;
  optional AppDetails details = 10;
}

message AppID {
  AppSource source = 1;
  string source_app_id = 2;
}

message AppDetails {
  string description = 1;
  string release_date = 2;
  string developer = 3;
  string publisher = 4;
  string version = 5;
}

enum AppType {
  APP_TYPE_UNSPECIFIED = 0;
  APP_TYPE_GAME = 1;
}

enum AppSource {
  APP_SOURCE_UNSPECIFIED = 0;
  APP_SOURCE_INTERNAL = 1;
  APP_SOURCE_STEAM = 2;
}

message AppPackage {
  InternalID id = 1;
  AppPackageSource source = 2;
  InternalID source_id = 3;
  string source_package_id = 4;
  string name = 5;
  string description = 6;
  AppPackageBinary binary = 7;
  App source_bind_app = 8;
}

enum AppPackageSource {
  APP_PACKAGE_SOURCE_UNSPECIFIED = 0;
  APP_PACKAGE_SOURCE_MANUAL = 1;
  APP_PACKAGE_SOURCE_SENTINEL = 2;
}

message AppPackageBinary {
  string name = 1;
  int64 size = 2;
  string public_url = 3;
}

message Feed {
  InternalID id = 1;
  string title = 2;
  string link = 3;
  string description = 4;
  repeated FeedItem items = 5;

  string language = 6;
  FeedImage image = 7;
  repeated FeedPerson authors = 8;
}

message FeedItem {
  InternalID id = 1;
  string title = 2;
  repeated FeedPerson authors = 3;
  string description = 4;
  string content = 5;
  string guid = 6;
  string link = 7;
  FeedImage image = 8;
  string published = 9;
  optional google.protobuf.Timestamp published_parsed = 10;
  string updated = 11;
  optional google.protobuf.Timestamp updated_parsed = 12;
  repeated FeedEnclosure enclosures = 13;
}

// Person is an individual specified in a feed
// (e.g. an author)
message FeedPerson {
  string name = 1;
  string email = 2;
}

// Image is an image that is the artwork for a given
// feed or item.
message FeedImage {
  string url = 1;
  string title = 2;
}

// Enclosure is a file associated with a given Item.
message FeedEnclosure {
  string url = 1;
  string length = 2;
  string type = 3;
}
