syntax = "proto3";

package librarian.v1;

import "google/protobuf/timestamp.proto";

option csharp_namespace = "TuiHub.Protos.Librarian.V1";
option go_package = "github.com/tuihub/protos/pkg/librarian/v1;v1";

// A globally unique identifier generated by `Searcher`
message InternalID {
  int64 id = 1;
}

message Account {
  InternalID internal_id = 1;
  AccountPlatform platform = 2;
  string platform_account_id = 3;
  string name = 4;
  string profile_url = 5;
  string avatar_url = 6;
}

message AccountID {
  AccountPlatform platform = 1;
  string platform_account_id = 2;
}

enum AccountPlatform {
  ACCOUNT_PLATFORM_UNSPECIFIED = 0;
  ACCOUNT_PLATFORM_STEAM = 1;
}

message App {
  InternalID id = 1;
  AppSource source = 2;
  string source_app_id = 3;
  optional string source_url = 4;

  string name = 6;
  AppType type = 7;
  string short_description = 8;
  string image_url = 9;
  optional AppDetails details = 10;
}

message AppID {
  AppSource source = 1;
  string source_app_id = 2;
}

message AppDetails {
  string description = 1;
  string release_date = 2;
  string developer = 3;
  string publisher = 4;
  string version = 5;
}

enum AppType {
  APP_TYPE_UNSPECIFIED = 0;
  APP_TYPE_GAME = 1;
}

enum AppSource {
  APP_SOURCE_UNSPECIFIED = 0;
  APP_SOURCE_INTERNAL = 1;
  APP_SOURCE_STEAM = 2;
}

message Feed {
  string title = 1;
  string link = 2;
  string description = 3;
  optional string language = 4;
  repeated FeedItem item = 5;
  optional string image = 6;
  optional string itunes_author = 7;
  optional string itunes_category = 8;

  message FeedItem {
    string title = 1;
    optional string author = 2;
    optional string category = 3;
    string description = 4;
    optional google.protobuf.Timestamp pub_date = 5;
    optional string guid = 6;
    string link = 7;

    optional string enclosure_url = 11;
    optional string enclosure_length = 12;
    optional string enclosure_type = 13;
    optional string itunes_item_image = 14;
    optional string itunes_duration = 15;

    optional int64 upvotes = 16;
    optional int64 downvotes = 17;
    optional int64 comments = 18;
  }
}
